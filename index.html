<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>AlpineJS Pizza-Cart with API</title>

	<script src="https://unpkg.com/alpinejs" defer></script>
	<script src="https://unpkg.com/axios@1.1.2/dist/axios.min.js"></script>
	<script src="./pizza.js"></script>
	<!-- <script src="./index.js"></script> -->

	<link rel="stylesheet" href="https://unpkg.com/normalize.css@8.0.1/normalize.css">
	<link rel="stylesheet" href="./style.css">
	<style>
		[x-cloak] {
			display: none !important;
		}
	</style>
</head>

<body x-data="pizzaCart">
	<h1 x-text="title"></h1>

	<table class="pizza-cart" :class="cartTotal ? '' : 'hidden'" x-cloak>
		<tr>
			<th>Flavour</th>
			<th>Size</th>
			<th>Price</th>
			<th>Qty</th>
			<th>Total</th>
		</tr>

		<template x-for="pizza in cartPizzas">
			<tr>
				<td x-text="pizza.flavour"></td>
				<td x-text="pizza.size.charAt(0).toUpperCase() + pizza.size.slice(1)"></td>
				<td>R<span x-text="pizza.price.toFixed(2)"></span></td>
				<td>
					<button @click="removePizzaFromCart(pizza.id)">-</button>
					x<span x-text="pizza.qty"></span>
					<button @click="addPizzaToCart(pizza.id)">+</button>
				</td>
				<td>R<span x-text="pizza.total.toFixed(2)"></span></td>
			</tr>
		</template>

		<tr>
			<td colspan="1">Total</td>
			<td><button @click="clearCart()">Clear</button></td>
			<td colspan="3" align="right">R<span x-text="cartTotal.toFixed(2)"></span></td>
		</tr>
	</table>

	<div class="pizza-catalog">
		<template x-for="pizza in pizzas">
			<div class="pizza-card">
				<span x-text="pizza.flavour"></span>
				<span x-text="pizza.size.charAt(0).toUpperCase() + pizza.size.slice(1)"></span>
				<span>R<span x-text="pizza.price.toFixed(2)"></span></span>
				<button @click="addPizzaToCart(pizza.id)">Add to cart</button>
			</div>
		</template>
	</div>

</body>

</html>